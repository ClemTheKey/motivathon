<!-- BUILD: db-sync @ 2025-08-29  -->
<!DOCTYPE html>
<html lang="fr">
<head>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0077cc">
  <meta charset="UTF-8" />
  <title>Motivathon</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header id="appBanner" role="banner" aria-label="Motivathon">
    <img src="app.png" alt="" class="app-logo" />
    <div class="app-titlebox">
      <h1 class="app-title" aria-label="Motivathon">Motivathon</h1>
      <div class="app-baseline">From zero to hero&nbsp;!</div>
    </div>
  </header>
  <div class="container">
    <!-- Contenu principal : T√ÇCHES / HISTORIQUE / ADMIN -->
    <main id="main">
      <!-- Onglets -->
      

      <!-- Panneau T√ÇCHES -->
      <section id="tab-tasks" class="tab-panel active"><div class="toolbar">
          <button id="openModal" class="btn-plus" title="Ajouter une t√¢che" aria-label="Ajouter une t√¢che">+</button>
        
          <button id="btnHistory" class="btn-plus" title="Historique" aria-label="Historique">üïò</button>
          <button id="btnAdmin" class="btn-plus" title="Admin" aria-label="Admin">‚öôÔ∏è</button>
</div>
<div id="controlsBar">
          <div id="groupControls">Regrouper par :
            <select id="groupBy">
              <option value="category" selected>Cat√©gorie</option>
              <option value="period">P√©riodicit√©</option>
              <option value="none">Aucun</option>
            </select>
          </div>

        
          <div id="sortControls">Trier par :
            <select id="sortBy">
              <option value="none" selected>Aucun</option>
              <option value="xpAsc">XP croissant</option>
              <option value="xpDesc">XP d√©croissant</option>
            </select>
          </div>
          <div id="foldControls">
            <button id="collapseAll" class="ghost" title="Plier tous les groupes">Tout plier</button>
            <button id="expandAll" class="ghost" title="D√©plier tous les groupes">Tout d√©plier</button>
          </div>
          <div id="totalCounter" title="Nombre total de t√¢ches">Total : 0</div>
        </div>

        <!-- Modal d'ajout/√©dition -->
        <div id="taskModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
          <div class="modal-content">
            <span class="close" id="closeModal" aria-label="Fermer">&times;</span>
            <h2 id="modalTitle">Ajouter une t√¢che</h2>
            <form id="taskForm">
              <input type="text" id="taskTitle" placeholder="Titre" required />
              <select id="taskCategory" required>
                <option value="">Cat√©gorie</option>
                <option value="Alimentation">ü•¶ Alimentation</option>
                <option value="Sport">üèÉ Sport</option>
                <option value="Good Habits">‚è∞ Good Habits</option>
                <option value="Healthy life">üßò‚Äç‚ôÇÔ∏è Healthy life</option>
                <option value="Divers">üéØ Divers</option>
              </select>
              <select id="taskPeriod" required>
                <option value="">P√©riodicit√©</option>
                <option value="quotidienne">Quotidienne</option>
                <option value="hebdomadaire">Hebdomadaire</option>
                <option value="mensuelle">Mensuelle</option>
                <option value="3 jours">Tous les 3 jours</option>
                <option value="2 semaines">Toutes les 2 semaines</option>
                <option value="succ√®s">Succ√®s</option>
              </select>
              <input type="number" id="taskXP" placeholder="XP" required />
              <button type="submit" id="submitBtn">Ajouter</button>
            </form>
          </div>
        </div>

        

        <div id="taskList"></div>
      </section>

      <!-- Panneau HISTORIQUE -->
      <section id="tab-history" class="tab-panel"></section>

      <!-- Panneau ADMIN -->
      <section id="tab-admin" class="tab-panel"></section>
    </main>

    <!-- Panneau PROFIL (√† droite) -->
    <aside id="profilePanel" aria-label="Profil">
      <div class="card profile-card">
        <div class="profile-header">
          <h2>Profil</h2>
        </div>

        <!-- Placeholder image de grade -->
        <div class="grade-illustration">
          <div id="gradeImage" class="grade-placeholder" role="img" aria-label="Image du grade (placeholder)">Image du grade</div>
        </div>

        <!-- Badges profil -->
        <div id="profileBadges" class="profile-badges"></div>

        <!-- Barre d'XP -->
        <div id="xpContainer" aria-label="Barre d‚Äôexp√©rience">
          <div id="xpBar"><div id="xpFill" class="xp-fill"></div>
<!-- Armoire aux troph√©es -->


<div id="trophyGrid" class="trophy-grid"></div>
        </div>
        <span id="xpLabel">XP : 0 / 100</span></div>
<div id="trophyCabinet" class="trophy-cabinet">
  <div class="trophy-title">üóÑÔ∏è Armoire aux troph√©es</div>
  
</div>

        </div>
</div>
    </aside>
  </div>





<!-- Modal HISTORIQUE -->
<div id="historyModal" class="modal" hidden="true" role="dialog" aria-modal="true">
  <div class="modal-content">
    <span class="close" id="closeHistoryModal" aria-label="Fermer">&times;</span>
    
        <h2>Historique des t√¢ches valid√©es</h2>
        <div id="historyList"></div>
      
  </div>
</div>

<!-- Modal ADMIN -->
<div id="adminModal" class="modal" hidden="true" role="dialog" aria-modal="true">
  <div class="modal-content">
    <span class="close" id="closeAdminModal" aria-label="Fermer">&times;</span>
    
        <h2>Administration</h2>
        <div class="admin-actions">
          <button id="resetXP" class="secondary">R√©initialiser l'XP</button>
          <button id="clearHistory" class="danger">Vider l'historique</button>
          <button id="clearTasks" class="danger">Supprimer toutes les t√¢ches</button>
        </div>

        <div class="importer">
          <h3>Importer des t√¢ches (CSV)</h3>
          <div class="import-row">
            <input type="file" id="importCsv" accept=".csv" />
            <button id="importCsvBtn">Importer CSV</button>
          </div>
        <div class="importer">
          <h3>Backup & Restore</h3>
          <div class="import-row">
            <button id="backupExport" class="secondary" title="Exporter toutes les donn√©es en JSON">Exporter backup (.json)</button>
            <button id="backupImport" class="secondary" title="Restaurer depuis un fichier JSON">Importer backup (.json)</button>
            <input type="file" id="backupFile" accept="application/json" style="display:none" />
          </div>
          <p class="hint">Sauvegarde/restore de toutes les donn√©es locales : t√¢ches, historique, XP, pr√©f√©rences, pliages, troph√©es‚Ä¶</p>
          <div id="backupSummary" class="hint"></div>
        </div>

          <p class="hint">
            Colonnes attendues : <code>Titre</code>, <code>Cat√©gorie</code>,
            <code>P√©riodicit√©</code>, <code>XP</code> (s√©parateur ; ou , ou \t, prise en charge de <code>sep=;</code>).
          </p>
          <div id="importSummary" class="hint"></div>
          <details id="importErrors" class="hint" style="display:none;">
            <summary>Afficher les erreurs</summary>
            <ul id="importErrorsList"></ul>
          </details>
        </div>
      
  </div>
</div>
<!-- Footer -->
<footer class="footer">
  <div class="footer-content">
    <p>&copy; 2025 Motivathon ‚Äî All rights reserved.</p>
    <p>Powered by <strong>Clem</strong></p>
  </div>
</footer>

<style>
  .footer {
    background: #fff;
    color: #333;
    padding: 15px 20px;
    text-align: center;
    font-size: 0.9rem;
    margin-top: 40px;
    border-top: 1px solid #ddd; /* fine ligne de s√©paration */
  }

  .footer-content {
    max-width: 900px;
    margin: 0 auto;
  }

  .footer a {
    color: #0077cc;
    text-decoration: none;
  }

  .footer a:hover {
    text-decoration: underline;
  }
</style>

  <!-- Auth UI -->
<div id="authBar" style="position:fixed;top:10px;right:10px;z-index:10002;display:flex;gap:8px;align-items:center;">
  <span id="authUser" style="font:14px system-ui;color:#444;display:none"></span>
  <button id="btnLogin"  style="padding:6px 10px;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer">Se connecter</button>
  <button id="btnLogout" style="padding:6px 10px;border:1px solid #ddd;border-radius:10px;background:#fff;cursor:pointer;display:none">Se d√©connecter</button>
</div>

<!-- Modal login -->
<div id="authModal" class="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);align-items:center;justify-content:center;z-index:10001">
  <div class="modal-content" style="background:#fff;width:min(92vw,420px);padding:20px;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.28);position:relative">
    <span id="authClose" class="close" style="position:absolute;right:10px;top:8px;font-size:22px;cursor:pointer">&times;</span>
    <h3 style="margin:0 0 10px">Connexion</h3>
    <p>Entre ton e-mail, tu recevras un lien magique pour te connecter.</p>
    <input id="authEmail" type="email" placeholder="ton@email.com"
           style="width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;margin:8px 0 12px">
    <button id="authSend" style="padding:8px 12px;border:1px solid #0077cc;border-radius:10px;background:#0077cc;color:#fff;cursor:pointer">
      Envoyer le lien
    </button>
    <div id="authMsg" style="margin-top:10px;color:#555;font:13px system-ui"></div>
  </div>
</div>

<!-- Supabase SDK -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<!-- Variables d'environnement Supabase -->
<script>
  window.__ENV__ = {
    SUPABASE_URL: "https://ffgmghmpopoqhquwlngc.supabase.co",
    SUPABASE_ANON_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZmZ21naG1wb3BvcWhxdXdsbmdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzOTc5NDcsImV4cCI6MjA3MTk3Mzk0N30.g--ND0xLLVLo-e8rgWFDV5SBWX4YTdcAJLUf70NjVyY"
  };
</script>
  
<script src="dataService.js?v=fix1"></script>
<script src="db_init.js?v=fix1"></script>
<script src="app.js?v=fix1"></script>
</body>
</html>
